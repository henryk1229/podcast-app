<% if flash[:message] %>
  <h2><p><%= flash[:message] %></h2>
<%end%>

<%# BASIC PROFILE DISPLAY %>
<% if @user.id == current_user.id  %>
  <h3 class="users"> My Profile </h3>
<% else %>
  <h3 class="users"><%="#{@user.username.upcase}"%></h3>
<%end%>
    <p><%=image_tag "#{@user.avatar}"%>
    <%= @user.full_name %>
    <p> Bio: <%= @user.bio %>
    <p>E-mail: <%=mail_to @user.email %>

    <p> <a href="<%= following_user_path(@user) %>">
        <%= @user.following.count %>
      following
    </a> |
    <a href="<%= followers_user_path(@user) %>">
        <%= @user.followers.count %>
      followers
    </a>


<%# FOLLOWED PODCAST DISPLAY %>

    <ul>
      <h3>Favorite Podcasts:</h3>
    <% if @user.podcasts.length == 0 %>
        <% if current_user.id == @user.id %>
          None yet! Get listening!
        <%else%>
          None yet!
        <%end%>
    <%end%>
    <%@user.podcasts.each do |podcast|%>
    <p><%=link_to podcast.title, podcast_path(podcast.id)%>
    <%end%>
    </ul>


  <%# LINKS TO %>

    <p><h3><%= link_to "See all Podcasts", podcasts_path, method: :get%>
    <p><%= link_to "See all Users", users_path, method: :get%>

    <% if @user.id == current_user.id  %>
      <p><%= link_to "Log out", logout_path, method: :delete %>
      <p><%= button_to "Update profile", edit_user_path(@user), method: :get %>
      <p><%= button_to "Delete profile", @user, method: :delete, data: { confirm: "Are you sure you want to delete your profile?"} %>


     <% else %>
      <%# if current_user doesn't follow @user%>
      <% if current_user.followers.include?(@user)%>
           <%#see user.rb for method %>
        <p><%= button_to "Unfollow", follow_path(:id => @user.id), method: :delete %>
      <% else %>
      <%# if current_user follows @user%>
        <p><%= button_to "Follow", follows_path(:id => @user.id), method: :post %>
      <%end%>
      <p><%= button_to "Return to My Profile", user_path(current_user), method: :get%>
    <% end %>


  </h3>
